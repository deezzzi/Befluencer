import { Component, EventEmitter, Input, Output, ChangeDetectionStrategy } from '@angular/core';
import { NgClass, NgFor, NgIf, NgSwitch, NgSwitchCase } from '@angular/common';
import { RouterLink, RouterLinkActive } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';

interface NavItem { icon: string; label: string; route: string; hasChildren?: boolean; }

/**
 * SidebarComponent
 *
 * Collapsible primary navigation for dashboard routes.
 * - Receives `collapsed` state and emits `toggle` to parent layout.
 * - Renders a static nav map; active route highlighted via RouterLinkActive.
 * - Icons are inlined SVGs selected via ngSwitch for minimal runtime cost.
 */
@Component({
  selector: 'bf-sidebar',
  standalone: true,
  imports: [NgClass, NgFor, NgIf, NgSwitch, NgSwitchCase, RouterLink, RouterLinkActive, TranslateModule],
  styleUrls: ['./sidebar.component.scss'],
  template: `
  <aside
    class="sidebar group relative h-full flex flex-col bg-white dark:bg-gray-900 border-r border-slate-200 dark:border-gray-800 transition-[width] duration-300 ease-out"
    [ngClass]="collapsed ? 'sidebar--collapsed' : 'sidebar--expanded'"
    aria-label="Primary navigation"
  >
    <!-- Header -->
    <div class="flex items-center h-16 px-4 gap-3 shrink-0">
      <!-- Brand: show compact mark when collapsed, full wordmark when expanded -->
      <ng-container *ngIf="collapsed; else expandedBrand">
        <img src="/logo-icon.PNG" alt="Befluencer" class="h-9 w-9 rounded-md shadow-sm select-none object-contain" />
      </ng-container>
      <ng-template #expandedBrand>
        <img src="/logo-side.PNG" alt="Befluencer" class="h-8 w-auto select-none" />
      </ng-template>
    </div>

    <!-- Floating collapse/expand toggle placed on the sidebar edge (near top/logo area) -->
    <button
      (click)="toggle.emit()"
      class="absolute -right-4 top-3 inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-white text-slate-700 shadow-[0_8px_24px_-6px_rgba(0,0,0,0.25)] ring-1 ring-slate-200 hover:shadow-[0_10px_28px_-6px_rgba(0,0,0,0.3)] transition z-40"
      [attr.aria-label]="collapsed ? 'Expand sidebar' : 'Collapse sidebar'"
    >
      <!-- Expanded => show left chevron; Collapsed => show right chevron -->
      <svg *ngIf="!collapsed" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="m15 18-6-6 6-6"/></svg>
      <svg *ngIf="collapsed" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="m9 6 6 6-6 6"/></svg>
    </button>

    <!-- Nav list -->
    <nav class="flex-1 overflow-y-auto px-3 pt-2 space-y-1">
      <ng-container *ngFor="let item of nav">
        <a
          [attr.id]="item.tkey === 'nav.collab' ? 'bf-collab-anchor' : null"
          [routerLink]="item.route"
          routerLinkActive="nav-active"
          #rla="routerLinkActive"
          class="nav-link group flex items-center gap-3 rounded-md px-3 py-2 text-[13px] font-medium text-slate-700 hover:bg-slate-100 hover:text-slate-900 transition relative"
          [class.has-children]="item.hasChildren"
          [attr.aria-current]="rla.isActive ? 'page' : null"
        >
          <span class="icon-wrapper inline-flex h-5 w-5 items-center justify-center text-slate-500 group-hover:text-slate-700">
            <ng-container [ngSwitch]="item.icon">
              <svg *ngSwitchCase="'dashboard'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/></svg>
              <svg *ngSwitchCase="'campaigns'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M26.25 9.375H3.75C3.05964 9.375 2.5 9.93464 2.5 10.625V24.375C2.5 25.0654 3.05964 25.625 3.75 25.625H26.25C26.9404 25.625 27.5 25.0654 27.5 24.375V10.625C27.5 9.93464 26.9404 9.375 26.25 9.375Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                <path d="M7.5 15H18.75M7.5 20H12.5M15 4.375L10 9.375H20L15 4.375Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg *ngSwitchCase="'media'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M8.35667 22.9689L12.3476 18.978L11.022 17.6523L7.03105 21.6433L6.28761 20.8998C6.1118 20.7241 5.87339 20.6254 5.6248 20.6254C5.37621 20.6254 5.13779 20.7241 4.96199 20.8998L1.21199 24.6498C1.03623 24.8256 0.9375 25.0641 0.9375 25.3127C0.9375 25.5612 1.03623 25.7997 1.21199 25.9755L4.02449 28.788C4.20029 28.9637 4.43871 29.0625 4.6873 29.0625C4.93589 29.0625 5.1743 28.9637 5.35011 28.788L9.10011 25.038C9.27587 24.8622 9.3746 24.6237 9.3746 24.3752C9.3746 24.1266 9.27587 23.8881 9.10011 23.7123L8.35667 22.9689ZM4.6873 26.7995L3.20042 25.3127L5.6248 22.8883L7.11167 24.3752L4.6873 26.7995Z" fill="currentColor"/>
                <path d="M22.4999 28.1254C21.0086 28.1236 19.5789 27.5305 18.5243 26.4759C17.4698 25.4214 16.8766 23.9917 16.8749 22.5004C16.8749 22.0103 16.9411 21.5224 17.0718 21.0501L8.95114 12.9285C8.47804 13.0571 7.99016 13.1233 7.49989 13.1254C6.58342 13.129 5.68004 12.9078 4.86896 12.4811C4.05788 12.0544 3.36387 11.4352 2.84777 10.6779C2.33168 9.92052 2.00925 9.04812 1.90877 8.13716C1.8083 7.22621 1.93283 6.30451 2.27145 5.45289L2.79458 4.1207L5.89958 7.2257C6.07805 7.39635 6.31546 7.49159 6.56239 7.49159C6.80932 7.49159 7.04674 7.39635 7.2252 7.2257C7.40096 7.04989 7.49969 6.81148 7.49969 6.56289C7.49969 6.31429 7.40096 6.07588 7.2252 5.90007L4.11833 2.7932L5.45239 2.27101C6.3041 1.93259 7.22582 1.80825 8.13675 1.90888C9.04769 2.00951 9.92004 2.33204 10.6773 2.8482C11.4347 3.36436 12.0538 4.05839 12.4805 4.86947C12.9072 5.68055 13.1285 6.58391 13.1249 7.50039C13.1249 7.99049 13.0587 8.47834 12.928 8.9507L21.0496 17.0723C21.5224 16.9438 22.0099 16.8776 22.4999 16.8754C23.4164 16.8717 24.3197 17.0929 25.1308 17.5197C25.9419 17.9464 26.6359 18.5656 27.152 19.3229C27.6681 20.0803 27.9905 20.9527 28.091 21.8636C28.1915 22.7746 28.067 23.6963 27.7283 24.5479L27.2061 25.8801L24.1002 22.7751C23.9218 22.6047 23.6846 22.5096 23.4379 22.5096C23.1912 22.5096 22.9539 22.6047 22.7755 22.7751C22.5996 22.9508 22.5007 23.1891 22.5006 23.4377C22.5004 23.6863 22.599 23.9248 22.7746 24.1007L25.8805 27.2066L24.5474 27.7298C23.8955 27.9881 23.2011 28.1223 22.4999 28.1254ZM9.43395 10.7591L19.2402 20.5673L19.0161 21.1382C18.7966 21.6871 18.7107 22.2803 18.7657 22.869C18.8207 23.4576 19.015 24.0247 19.3324 24.5234C19.6499 25.0221 20.0815 25.4381 20.5915 25.7371C21.1015 26.0361 21.6753 26.2095 22.2655 26.2429L21.449 25.4273C21.1877 25.1661 20.9805 24.856 20.8392 24.5148C20.6978 24.1735 20.625 23.8077 20.625 23.4384C20.625 23.069 20.6978 22.7032 20.8392 22.3619C20.9805 22.0207 21.1877 21.7106 21.449 21.4494C21.9845 20.9374 22.6969 20.6517 23.4379 20.6517C24.1788 20.6517 24.8912 20.9374 25.4268 21.4494L26.2424 22.266C26.2088 21.6757 26.0353 21.1019 25.7362 20.5919C25.4372 20.0819 25.021 19.6504 24.5223 19.333C24.0235 19.0155 23.4563 18.8213 22.8677 18.7663C22.279 18.7113 21.6857 18.7971 21.1368 19.0166L20.5658 19.2407L10.7596 9.43445L10.9846 8.86257C11.204 8.3136 11.2896 7.72032 11.2345 7.13171C11.1793 6.5431 10.985 5.97606 10.6674 5.47738C10.3499 4.9787 9.91833 4.5627 9.40832 4.26372C8.89831 3.96474 8.3245 3.79136 7.73427 3.75788L8.54989 4.57351C8.81111 4.83468 9.01832 5.14475 9.15969 5.48601C9.30106 5.82727 9.37382 6.19303 9.37382 6.56242C9.37382 6.9318 9.30106 7.29756 9.15969 7.63882C9.01832 7.98008 8.81111 8.29015 8.54989 8.55132C8.01433 9.06335 7.30193 9.3491 6.56099 9.3491C5.82004 9.3491 5.10764 9.06335 4.57208 8.55132L3.75645 7.73476C3.78987 8.325 3.96323 8.89882 4.26221 9.40882C4.5612 9.91882 4.97723 10.3504 5.47595 10.6678C5.97467 10.9853 6.54175 11.1795 7.13037 11.2345C7.71899 11.2895 8.31225 11.2037 8.86114 10.9841L9.43395 10.7591Z" fill="currentColor"/>
                <path d="M27.3028 2.6718C26.7672 2.15978 26.0548 1.87402 25.3139 1.87402C24.573 1.87402 23.8606 2.15978 23.325 2.6718L16.3125 9.6843L17.6381 11.0099L24.6506 3.99742C24.8292 3.82698 25.0666 3.73189 25.3134 3.73189C25.5603 3.73189 25.7977 3.82698 25.9763 3.99742C26.152 4.17323 26.2507 4.41164 26.2507 4.66024C26.2507 4.90883 26.152 5.14724 25.9763 5.32305L18.9638 12.3355L20.2894 13.6621L27.3019 6.64961C27.8287 6.12179 28.1246 5.40648 28.1246 4.6607C28.1246 3.91493 27.8297 3.19962 27.3028 2.6718Z" fill="currentColor"/>
              </svg>
              <svg *ngSwitchCase="'analytics'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M4 19V9"/><path d="M8 19V5"/><path d="M12 19v-8"/><path d="M16 19v-4"/><path d="M20 19V8"/></svg>
              <svg *ngSwitchCase="'wallet'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M23.75 25H6.25C5.58696 25 4.95107 24.7366 4.48223 24.2678C4.01339 23.7989 3.75 23.163 3.75 22.5V11.25C3.75 10.587 4.01339 9.95107 4.48223 9.48223C4.95107 9.01339 5.58696 8.75 6.25 8.75H23.75C24.413 8.75 25.0489 9.01339 25.5178 9.48223C25.9866 9.95107 26.25 10.587 26.25 11.25V22.5C26.25 23.163 25.9866 23.7989 25.5178 24.2678C25.0489 24.7366 24.413 25 23.75 25Z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M20.625 17.5C20.4592 17.5 20.3003 17.4342 20.1831 17.3169C20.0658 17.1997 20 17.0408 20 16.875C20 16.7092 20.0658 16.5503 20.1831 16.4331C20.3003 16.3158 20.4592 16.25 20.625 16.25C20.7908 16.25 20.9497 16.3158 21.0669 16.4331C21.1842 16.5503 21.25 16.7092 21.25 16.875C21.25 17.0408 21.1842 17.1997 21.0669 17.3169C20.9497 17.4342 20.7908 17.5 20.625 17.5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22.5 8.75044V7.00419C22.4999 6.62107 22.4117 6.24309 22.2423 5.89946C22.0729 5.55582 21.8268 5.25572 21.523 5.02233C21.2192 4.78893 20.8658 4.62849 20.4901 4.55339C20.1144 4.47828 19.7265 4.49053 19.3562 4.58919L5.60625 8.25544C5.07382 8.39732 4.60317 8.71114 4.26749 9.1481C3.9318 9.58505 3.74988 10.1207 3.75 10.6717V11.2504" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <svg *ngSwitchCase="'collab'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.04055 17.1698L8.08305 16.5136L8.1243 15.1798C8.22805 12.0486 8.3368 8.77357 7.6218 8.72857C7.55742 8.72504 7.493 8.7345 7.43236 8.75641C7.37173 8.77832 7.31612 8.81221 7.26888 8.85608C7.22163 8.89995 7.1837 8.95288 7.15736 9.01172C7.13101 9.07057 7.11679 9.13412 7.11555 9.19858C6.8793 10.8211 5.7693 21.5261 7.27555 21.5261C7.78805 21.5261 7.79555 21.3698 7.93305 18.9636L7.98055 18.1511C10.793 18.5073 13.6268 18.6673 16.4618 18.6323C17.9956 18.7283 19.5153 18.2901 20.7625 17.3923C22.0097 16.4944 22.9074 15.1923 23.3031 13.7073C23.6118 12.1886 23.668 10.6286 23.4693 9.09233C23.4418 8.96538 23.3668 8.85372 23.2598 8.78014C23.1527 8.70656 23.0216 8.6766 22.8932 8.69638C22.7649 8.71615 22.6489 8.78417 22.5689 8.88656C22.489 8.98894 22.4511 9.11798 22.463 9.24732C22.4901 10.6062 22.3208 11.9618 21.9605 13.2723C20.648 17.1223 17.6143 17.1336 12.878 17.1473C12.1805 17.1498 11.4455 17.1511 10.6743 17.1661C10.4193 17.1661 10.1368 17.1711 9.8443 17.1761C9.2468 17.1861 8.6043 17.1973 8.04055 17.1698Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.71911 0.185899C6.86009 0.0962792 5.99284 0.241016 5.20947 0.604735C4.42611 0.968454 3.7559 1.53757 3.27003 2.25163C2.78416 2.96569 2.50079 3.79802 2.45 4.66021C2.39922 5.5224 2.58293 6.38224 2.98161 7.1484C6.62786 13.8146 16.4766 7.0734 10.7416 1.66965C10.7341 1.67465 9.27536 0.348399 7.71911 0.185899ZM10.0154 2.3834C14.0441 6.7884 6.80286 10.7834 4.35911 6.3884C2.88411 3.73715 6.06536 -0.300351 10.0154 2.3834ZM7.35786 20.6546C6.53915 20.5145 5.69803 20.5911 4.91807 20.8767C4.13812 21.1624 3.44648 21.6471 2.91188 22.2828C2.37728 22.9185 2.01834 23.683 1.87071 24.5004C1.72308 25.3178 1.79191 26.1596 2.07036 26.9422C2.42504 27.7286 2.97015 28.4143 3.65641 28.9372C4.34267 29.4601 5.14843 29.8038 6.00085 29.937C6.85327 30.0703 7.72546 29.989 8.53857 29.7005C9.35168 29.412 10.0801 28.9254 10.6579 28.2846C11.3009 27.6527 11.7378 26.841 11.9112 25.9562C12.0846 25.0715 11.9864 24.1549 11.6295 23.327C11.2726 22.499 10.6736 21.7984 9.91128 21.317C9.14894 20.8356 8.25884 20.596 7.35786 20.6297V20.6546ZM7.30536 21.6472C7.95442 21.6511 8.58738 21.8497 9.12237 22.2172C9.65736 22.5848 10.0698 23.1043 10.3063 23.7088C10.5428 24.3132 10.5926 24.9747 10.4491 25.6078C10.3057 26.2408 9.97561 26.8162 9.50161 27.2597C9.08992 27.6938 8.57939 28.0221 8.0135 28.2165C7.4476 28.4108 6.84312 28.4655 6.25152 28.3759C5.65993 28.2863 5.09877 28.055 4.61583 27.7018C4.13288 27.3485 3.74248 26.8838 3.47786 26.3471C3.28153 25.7719 3.23445 25.1561 3.34101 24.5577C3.44758 23.9592 3.70432 23.3976 4.08717 22.9254C4.47002 22.4533 4.96646 22.086 5.52998 21.8581C6.0935 21.6301 6.70566 21.5489 7.30911 21.6222L7.30536 21.6472ZM20.8466 0.342149C19.6572 0.797854 18.6788 1.67819 18.1005 2.81311C17.5222 3.94802 17.385 5.25698 17.7154 6.48715C18.126 7.47247 18.8121 8.31847 19.6914 8.92373C20.5707 9.52899 21.6059 9.86784 22.6729 9.89965C23.3398 9.97542 24.0152 9.91504 24.6581 9.72215C25.301 9.52926 25.8981 9.20788 26.4132 8.77748C26.9283 8.34708 27.3506 7.81661 27.6547 7.2182C27.9587 6.61979 28.1382 5.96589 28.1821 5.2961C28.2261 4.62631 28.1336 3.95456 27.9104 3.32155C27.6871 2.68854 27.3377 2.10743 26.8832 1.61342C26.4288 1.11941 25.8788 0.722769 25.2666 0.447529C24.6544 0.172288 23.9927 0.0241717 23.3216 0.0121494C23.3216 0.0208994 22.0391 -0.114101 20.8466 0.342149ZM23.2666 1.0334C23.9944 1.004 24.7132 1.20238 25.3229 1.6009C25.8216 1.98901 26.2158 2.49531 26.4697 3.07403C26.7237 3.65275 26.8294 4.28563 26.7772 4.91546C26.7251 5.54529 26.5169 6.15219 26.1713 6.68131C25.8257 7.21042 25.3536 7.64505 24.7979 7.9459C23.7786 8.41703 22.6155 8.47077 21.5571 8.09564C20.4988 7.72051 19.6291 6.94626 19.1341 5.9384C18.9127 5.0209 19.0229 4.05469 19.4452 3.2106C19.8675 2.36651 20.5746 1.69893 21.4416 1.3259C21.6066 1.25465 22.2991 1.0334 23.2666 1.0334Z" fill="currentColor"/>
              </svg>
              <svg *ngSwitchCase="'tasks'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 32 32" fill="none">
                <path d="M4.57227 6.00042C4.57227 5.01533 4.96359 4.07059 5.66015 3.37402C6.35672 2.67746 7.30146 2.28613 8.28655 2.28613H23.7151C24.7002 2.28613 25.645 2.67746 26.3415 3.37402C27.0381 4.07059 27.4294 5.01533 27.4294 6.00042V19.8621C27.2915 19.9536 27.1616 20.0602 27.0397 20.1821L25.7151 21.5067V6.00042C25.7151 5.46999 25.5044 4.96128 25.1293 4.58621C24.7543 4.21113 24.2456 4.00042 23.7151 4.00042H8.28655C7.75612 4.00042 7.24741 4.21113 6.87234 4.58621C6.49726 4.96128 6.28655 5.46999 6.28655 6.00042V26.0004C6.28655 27.1044 7.18255 28.0004 8.28655 28.0004H17.5071L19.2214 29.7147H8.28655C7.30146 29.7147 6.35672 29.3234 5.66015 28.6268C4.96359 27.9303 4.57227 26.9855 4.57227 26.0004V6.00042ZM12.0008 10.0004C12.0008 10.3793 11.8503 10.7427 11.5824 11.0106C11.3145 11.2785 10.9511 11.429 10.5723 11.429C10.1934 11.429 9.83002 11.2785 9.56211 11.0106C9.2942 10.7427 9.14369 10.3793 9.14369 10.0004C9.14369 9.62154 9.2942 9.25817 9.56211 8.99027C9.83002 8.72236 10.1934 8.57185 10.5723 8.57185C10.9511 8.57185 11.3145 8.72236 11.5824 8.99027C11.8503 9.25817 12.0008 9.62154 12.0008 10.0004ZM10.5723 17.429C10.9511 17.429 11.3145 17.2785 11.5824 17.0106C11.8503 16.7427 12.0008 16.3793 12.0008 16.0004C12.0008 15.6215 11.8503 15.2582 11.5824 14.9903C11.3145 14.7224 10.9511 14.5718 10.5723 14.5718C10.1934 14.5718 9.83002 14.7224 9.56211 14.9903C9.2942 15.2582 9.14369 15.6215 9.14369 16.0004C9.14369 16.3793 9.2942 16.7427 9.56211 17.0106C9.83002 17.2785 10.1934 17.429 10.5723 17.429ZM10.5723 23.429C10.9511 23.429 11.3145 23.2785 11.5824 23.0106C11.8503 22.7427 12.0008 22.3793 12.0008 22.0004C12.0008 21.6215 11.8503 21.2582 11.5824 20.9903C11.3145 20.7224 10.9511 20.5718 10.5723 20.5718C10.1934 20.5718 9.83002 20.7224 9.56211 20.9903C9.2942 21.2582 9.14369 21.6215 9.14369 22.0004C9.14369 22.3793 9.2942 22.7427 9.56211 23.0106C9.83002 23.2785 10.1934 23.429 10.5723 23.429ZM14.5723 9.14328C14.3449 9.14328 14.1269 9.23358 13.9662 9.39433C13.8054 9.55507 13.7151 9.77309 13.7151 10.0004C13.7151 10.2277 13.8054 10.4458 13.9662 10.6065C14.1269 10.7673 14.3449 10.8576 14.5723 10.8576H22.0008C22.2282 10.8576 22.4462 10.7673 22.6069 10.6065C22.7677 10.4458 22.858 10.2277 22.858 10.0004C22.858 9.77309 22.7677 9.55507 22.6069 9.39433C22.4462 9.23358 22.2282 9.14328 22.0008 9.14328H14.5723ZM13.7151 16.0004C13.7151 15.7731 13.8054 15.5551 13.9662 15.3943C14.1269 15.2336 14.3449 15.1433 14.5723 15.1433H22.0008C22.2282 15.1433 22.4462 15.2336 22.6069 15.3943C22.7677 15.5551 22.858 15.7731 22.858 16.0004C22.858 16.2277 22.7677 16.4458 22.6069 16.6065C22.4462 16.7673 22.2282 16.8576 22.0008 16.8576H14.5723C14.3449 16.8576 14.1269 16.7673 13.9662 16.6065C13.8054 16.4458 13.7151 16.2277 13.7151 16.0004ZM14.5723 21.1433C14.3449 21.1433 14.1269 21.2336 13.9662 21.3943C13.8054 21.5551 13.7151 21.7731 13.7151 22.0004C13.7151 22.2277 13.8054 22.4458 13.9662 22.6065C14.1269 22.7673 14.3449 22.8576 14.5723 22.8576H22.0008C22.2282 22.8576 22.4462 22.7673 22.6069 22.6065C22.7677 22.4458 22.858 22.2277 22.858 22.0004C22.858 21.7731 22.7677 21.5551 22.6069 21.3943C22.4462 21.2336 22.2282 21.1433 22.0008 21.1433H14.5723ZM29.4637 22.6061L22.6066 29.4633C22.4458 29.6238 22.228 29.7139 22.0008 29.7139C21.7737 29.7139 21.5558 29.6238 21.3951 29.4633L17.9688 26.037C17.8174 25.8745 17.735 25.6596 17.7389 25.4375C17.7428 25.2155 17.8328 25.0036 17.9898 24.8466C18.1469 24.6895 18.3588 24.5996 18.5808 24.5956C18.8029 24.5917 19.0178 24.6742 19.1803 24.8256L22.0008 27.645L28.2523 21.3936C28.3314 21.3117 28.426 21.2465 28.5306 21.2016C28.6352 21.1567 28.7477 21.1331 28.8615 21.1322C28.9753 21.1313 29.0881 21.153 29.1935 21.1962C29.2988 21.2393 29.3944 21.303 29.4749 21.3835C29.5553 21.464 29.6189 21.5598 29.662 21.6651C29.705 21.7705 29.7267 21.8834 29.7256 21.9972C29.7246 22.111 29.7009 22.2234 29.6559 22.328C29.6109 22.4326 29.5456 22.5271 29.4637 22.6061Z" fill="currentColor"/>
              </svg>
              <svg *ngSwitchCase="'community'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M15 3.75C14.6307 3.75 14.2649 3.82275 13.9237 3.96409C13.5825 4.10543 13.2724 4.3126 13.0113 4.57376C12.7501 4.83493 12.5429 5.14497 12.4016 5.4862C12.2602 5.82743 12.1875 6.19316 12.1875 6.5625C12.1875 6.93184 12.2602 7.29757 12.4016 7.6388C12.5429 7.98003 12.7501 8.29007 13.0113 8.55124C13.2724 8.8124 13.5825 9.01957 13.9237 9.16091C14.2649 9.30225 14.6307 9.375 15 9.375C15.7459 9.375 16.4613 9.07868 16.9887 8.55124C17.5162 8.02379 17.8125 7.30842 17.8125 6.5625C17.8125 5.81658 17.5162 5.10121 16.9887 4.57376C16.4613 4.04632 15.7459 3.75 15 3.75ZM10.3125 6.5625C10.3125 5.3193 10.8064 4.12701 11.6854 3.24794C12.5645 2.36886 13.7568 1.875 15 1.875C16.2432 1.875 17.4355 2.36886 18.3146 3.24794C19.1936 4.12701 19.6875 5.3193 19.6875 6.5625C19.6875 7.8057 19.1936 8.99799 18.3146 9.87706C17.4355 10.7561 16.2432 11.25 15 11.25C13.7568 11.25 12.5645 10.7561 11.6854 9.87706C10.8064 8.99799 10.3125 7.8057 10.3125 6.5625ZM7.5 15.9375C7.50125 15.595 7.53625 15.2638 7.605 14.9437L3.96 15.9187C3.60317 16.0145 3.2687 16.1795 2.97569 16.4046C2.68268 16.6296 2.43687 16.9101 2.2523 17.2301C2.06773 17.5502 1.94803 17.9034 1.90002 18.2697C1.85201 18.636 1.87664 19.0082 1.9725 19.365L2.7 22.0819C2.89559 22.8109 3.2359 23.4931 3.70066 24.0878C4.16541 24.6825 4.7451 25.1776 5.40521 25.5436C6.06531 25.9096 6.79233 26.1391 7.54295 26.2182C8.29357 26.2974 9.05245 26.2246 9.77437 26.0044C9.27291 25.518 8.84187 24.9638 8.49375 24.3581C7.61048 24.4434 6.72558 24.2127 5.99639 23.707C5.2672 23.2013 4.74097 22.4534 4.51125 21.5962L3.78187 18.8775C3.71776 18.6373 3.75167 18.3815 3.87614 18.1663C4.00061 17.9511 4.20546 17.7942 4.44563 17.73L7.5 16.9125V15.9375ZM20.4112 26.0588L20.2238 26.0063C20.7244 25.5187 21.1575 24.9656 21.5063 24.3581C22.3895 24.4434 23.2744 24.2127 24.0036 23.707C24.7328 23.2013 25.259 22.4534 25.4888 21.5962L26.2163 18.8775C26.2804 18.6376 26.2468 18.382 26.1227 18.1668C25.9986 17.9517 25.7942 17.7946 25.5544 17.73L22.5 16.9125V15.9375C22.4988 15.595 22.4638 15.2638 22.395 14.9437L26.0381 15.9187C26.3951 16.0143 26.7298 16.1792 27.023 16.4041C27.3162 16.629 27.5622 16.9096 27.747 17.2296C27.9318 17.5497 28.0516 17.903 28.0998 18.2694C28.1479 18.6358 28.1233 19.0081 28.0275 19.365L27.3 22.0819C26.9133 23.5223 25.9704 24.7503 24.6786 25.4957C23.3868 26.2411 21.8519 26.4448 20.4112 26.0588ZM3.75 9.375C3.75 8.87772 3.94754 8.40081 4.29917 8.04918C4.65081 7.69754 5.12772 7.5 5.625 7.5C6.12228 7.5 6.59919 7.69754 6.95083 8.04918C7.30246 8.40081 7.5 8.87772 7.5 9.375C7.5 9.87228 7.30246 10.3492 6.95083 10.7008C6.59919 11.0525 6.12228 11.25 5.625 11.25C5.12772 11.25 4.65081 11.0525 4.29917 10.7008C3.94754 10.3492 3.75 9.87228 3.75 9.375ZM5.625 5.625C4.63044 5.625 3.67661 6.02009 2.97335 6.72335C2.27009 7.42661 1.875 8.38044 1.875 9.375C1.875 10.3696 2.27009 11.3234 2.97335 12.0267C3.67661 12.7299 4.63044 13.125 5.625 13.125C6.61956 13.125 7.57339 12.7299 8.27665 12.0267C8.97991 11.3234 9.375 10.3696 9.375 9.375C9.375 8.38044 8.97991 7.42661 8.27665 6.72335C7.57339 6.02009 6.61956 5.625 5.625 5.625ZM24.375 7.5C23.8777 7.5 23.4008 7.69754 23.0492 8.04918C22.6975 8.40081 22.5 8.87772 22.5 9.375C22.5 9.87228 22.6975 10.3492 23.0492 10.7008C23.4008 11.0525 23.8777 11.25 24.375 11.25C24.8723 11.25 25.3492 11.0525 25.7008 10.7008C26.0525 10.3492 26.25 9.87228 26.25 9.375C26.25 8.87772 26.0525 8.40081 25.7008 8.04918C25.3492 7.69754 24.8723 7.5 24.375 7.5ZM20.625 9.375C20.625 8.38044 21.0201 7.42661 21.7234 6.72335C22.4266 6.02009 23.3804 5.625 24.375 5.625C25.3696 5.625 26.3234 6.02009 27.0266 6.72335C27.7299 7.42661 28.125 8.38044 28.125 9.375C28.125 10.3696 27.7299 11.3234 27.0266 12.0267C26.3234 12.7299 25.3696 13.125 24.375 13.125C23.3804 13.125 22.4266 12.7299 21.7234 12.0267C21.0201 11.3234 20.625 10.3696 20.625 9.375ZM12.1875 13.125C11.4416 13.125 10.7262 13.4213 10.1988 13.9488C9.67132 14.4762 9.375 15.1916 9.375 15.9375V20.625C9.375 22.1168 9.96763 23.5476 11.0225 24.6025C12.0774 25.6574 13.5082 26.25 15 26.25C16.4918 26.25 17.9226 25.6574 18.9775 24.6025C20.0324 23.5476 20.625 22.1168 20.625 20.625V15.9375C20.625 15.1916 20.3287 14.4762 19.8012 13.9488C19.2738 13.4213 18.5584 13.125 17.8125 13.125H12.1875ZM11.25 15.9375C11.25 15.6889 11.3488 15.4504 11.5246 15.2746C11.7004 15.0988 11.9389 15 12.1875 15H17.8125C18.0611 15 18.2996 15.0988 18.4754 15.2746C18.6512 15.4504 18.75 15.6889 18.75 15.9375V20.625C18.75 21.6196 18.3549 22.5734 17.6516 23.2766C16.9484 23.9799 15.9946 24.375 15 24.375C14.0054 24.375 13.0516 23.9799 12.3483 23.2766C11.6451 22.5734 11.25 21.6196 11.25 20.625V15.9375Z" fill="currentColor"/>
              </svg>
              <svg *ngSwitchCase="'settings'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M15 18.75C17.0711 18.75 18.75 17.0711 18.75 15C18.75 12.9289 17.0711 11.25 15 11.25C12.9289 11.25 11.25 12.9289 11.25 15C11.25 17.0711 12.9289 18.75 15 18.75Z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M17.2063 2.69C16.7476 2.5 16.1651 2.5 15.0001 2.5C13.8351 2.5 13.2526 2.5 12.7938 2.69C12.4903 2.81564 12.2145 2.99987 11.9822 3.23215C11.7499 3.46444 11.5657 3.74023 11.4401 4.04375C11.3251 4.3225 11.2788 4.64875 11.2613 5.1225C11.2532 5.46491 11.1583 5.79966 10.9856 6.09544C10.8129 6.39122 10.568 6.63836 10.2738 6.81375C9.97483 6.98096 9.63831 7.06959 9.29574 7.07134C8.95317 7.07309 8.61576 6.9879 8.31507 6.82375C7.89507 6.60125 7.59132 6.47875 7.29007 6.43875C6.63297 6.35234 5.96845 6.53038 5.44258 6.93375C5.05008 7.2375 4.75757 7.74125 4.17507 8.75C3.59257 9.75875 3.30007 10.2625 3.23632 10.7562C3.19337 11.0818 3.21497 11.4127 3.29991 11.7299C3.38484 12.0471 3.53144 12.3445 3.73132 12.605C3.91632 12.845 4.17507 13.0462 4.57632 13.2987C5.16757 13.67 5.54758 14.3025 5.54758 15C5.54758 15.6975 5.16757 16.33 4.57632 16.7C4.17507 16.9537 3.91507 17.155 3.73132 17.395C3.53144 17.6555 3.38484 17.9529 3.29991 18.2701C3.21497 18.5873 3.19337 18.9182 3.23632 19.2438C3.30132 19.7363 3.59257 20.2413 4.17382 21.25C4.75757 22.2587 5.04883 22.7625 5.44258 23.0662C5.70312 23.2661 6.00049 23.4127 6.31771 23.4977C6.63492 23.5826 6.96576 23.6042 7.29133 23.5613C7.59133 23.5213 7.89507 23.3988 8.31507 23.1763C8.61576 23.0121 8.95317 22.9269 9.29574 22.9287C9.63831 22.9304 9.97483 23.019 10.2738 23.1862C10.8776 23.5362 11.2363 24.18 11.2613 24.8775C11.2788 25.3525 11.3238 25.6775 11.4401 25.9562C11.5657 26.2598 11.7499 26.5356 11.9822 26.7678C12.2145 27.0001 12.4903 27.1844 12.7938 27.31C13.2526 27.5 13.8351 27.5 15.0001 27.5C16.1651 27.5 16.7476 27.5 17.2063 27.31C17.5098 27.1844 17.7856 27.0001 18.0179 26.7678C18.2502 26.5356 18.4344 26.2598 18.5601 25.9562C18.6751 25.6775 18.7213 25.3525 18.7388 24.8775C18.7638 24.18 19.1226 23.535 19.7263 23.1862C20.0253 23.019 20.3618 22.9304 20.7044 22.9287C21.047 22.9269 21.3844 23.0121 21.6851 23.1763C22.1051 23.3988 22.4088 23.5213 22.7088 23.5613C23.0344 23.6042 23.3652 23.5826 23.6824 23.4977C23.9997 23.4127 24.297 23.2661 24.5576 23.0662C24.9513 22.7637 25.2426 22.2587 25.8251 21.25C26.4076 20.2413 26.7001 19.7375 26.7638 19.2438C26.8068 18.9182 26.7852 18.5873 26.7002 18.2701C26.6153 17.9529 26.4687 17.6555 26.2688 17.395C26.0838 17.155 25.8251 16.9538 25.4238 16.7013C25.1312 16.523 24.8887 16.2734 24.7188 15.9759C24.5489 15.6783 24.4573 15.3426 24.4526 15C24.4526 14.3025 24.8326 13.67 25.4238 13.3C25.8251 13.0463 26.0851 12.845 26.2688 12.605C26.4687 12.3445 26.6153 12.0471 26.7002 11.7299C26.7852 11.4127 26.8068 11.0818 26.7638 10.7562C26.6988 10.2637 26.4076 9.75875 25.8263 8.75C25.2426 7.74125 24.9513 7.2375 24.5576 6.93375C24.297 6.73386 23.9997 6.58727 23.6824 6.50233C23.3652 6.4174 23.0344 6.39579 22.7088 6.43875C22.4088 6.47875 22.1051 6.60125 21.6838 6.82375C21.3833 6.98768 21.0461 7.07274 20.7038 7.07099C20.3615 7.06925 20.0252 6.98074 19.7263 6.81375C19.4321 6.63836 19.1872 6.39122 19.0145 6.09544C18.8418 5.79966 18.747 5.46491 18.7388 5.1225C18.7213 4.6475 18.6763 4.3225 18.5601 4.04375C18.4344 3.74023 18.2502 3.46444 18.0179 3.23215C17.7856 2.99987 17.5098 2.81564 17.2063 2.69Z" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <svg *ngSwitchCase="'support'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M6.42941 15.0002V9.36452C6.44615 8.25673 6.68131 7.16313 7.12142 6.14638C7.56153 5.12964 8.19794 4.20972 8.99419 3.43935C9.79044 2.66898 10.7309 2.0633 11.7616 1.65701C12.7923 1.25072 13.8931 1.05181 15.0008 1.07167C16.1086 1.05181 17.2093 1.25072 18.2401 1.65701C19.2708 2.0633 20.2112 2.66898 21.0075 3.43935C21.8037 4.20972 22.4401 5.12964 22.8803 6.14638C23.3204 7.16313 23.5555 8.25673 23.5723 9.36452V15.0002M19.2866 26.2502C20.4232 26.2502 21.5133 25.7987 22.317 24.995C23.1207 24.1913 23.5723 23.1012 23.5723 21.9645V17.1431M19.2866 26.2502C19.2866 26.9606 19.0043 27.6419 18.502 28.1443C17.9997 28.6466 17.3184 28.9288 16.608 28.9288H13.3937C12.6833 28.9288 12.002 28.6466 11.4997 28.1443C10.9973 27.6419 10.7151 26.9606 10.7151 26.2502C10.7151 25.5398 10.9973 24.8585 11.4997 24.3562C12.002 23.8539 12.6833 23.5717 13.3937 23.5717H16.608C17.3184 23.5717 17.9997 23.8539 18.502 24.3562C19.0043 24.8585 19.2866 25.5398 19.2866 26.2502ZM3.21512 11.786H5.35798C5.64214 11.786 5.91466 11.8988 6.11559 12.0998C6.31653 12.3007 6.42941 12.5732 6.42941 12.8574V19.286C6.42941 19.5701 6.31653 19.8426 6.11559 20.0436C5.91466 20.2445 5.64214 20.3574 5.35798 20.3574H3.21512C2.6468 20.3574 2.10176 20.1316 1.69989 19.7298C1.29803 19.3279 1.07227 18.7828 1.07227 18.2145V13.9288C1.07227 13.3605 1.29803 12.8154 1.69989 12.4136C2.10176 12.0117 2.6468 11.786 3.21512 11.786ZM26.7866 20.3574H24.6437C24.3595 20.3574 24.087 20.2445 23.8861 20.0436C23.6851 19.8426 23.5723 19.5701 23.5723 19.286V12.8574C23.5723 12.5732 23.6851 12.3007 23.8861 12.0998C24.087 11.8988 24.3595 11.786 24.6437 11.786H26.7866C27.3549 11.786 27.8999 12.0117 28.3018 12.4136C28.7036 12.8154 28.9294 13.3605 28.9294 13.9288V18.2145C28.9294 18.7828 28.7036 19.3279 28.3018 19.7298C27.8999 20.1316 27.3549 20.3574 26.7866 20.3574Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg *ngSwitchCase="'logout'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 30 30" fill="none">
                <path d="M5 15H16.875M7.5 18.75L3.75 15L7.5 11.25M13.75 8.75V7.5C13.75 6.83696 14.0134 6.20107 14.4822 5.73223C14.9511 5.26339 15.587 5 16.25 5H22.5C23.163 5 23.7989 5.26339 24.2678 5.73223C24.7366 6.20107 25 6.83696 25 7.5V22.5C25 23.163 24.7366 23.7989 24.2678 24.2678C23.7989 24.7366 23.163 25 22.5 25H16.25C15.587 25 14.9511 24.7366 14.4822 24.2678C14.0134 23.7989 13.75 23.163 13.75 22.5V21.25" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </ng-container>
          </span>
          <span *ngIf="!collapsed" class="flex-1 truncate">{{ item.tkey | translate }}</span>
          <svg *ngIf="!collapsed && item.hasChildren" xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="m9 6 6 6-6 6" /></svg>
        </a>
      </ng-container>
    </nav>

    <!-- Logout -->
    <div class="px-3 pb-4 pt-2">
  <a class="nav-link flex items-center gap-3 rounded-md px-3 py-2 text-[13px] font-medium text-orange-500 hover:bg-orange-50 hover:text-orange-600 transition" href="#" (click)="onLogout($event)">
        <span class="icon-wrapper inline-flex h-5 w-5 items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><path d="M16 17l5-5-5-5"/><path d="M21 12H9"/></svg>
        </span>
        <span *ngIf="!collapsed">{{ 'nav.logout' | translate }}</span>
      </a>
    </div>
  </aside>
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class SidebarComponent {
  @Input() collapsed = false;
  @Output() toggle = new EventEmitter<void>();
  nav = [
    { icon: 'dashboard', tkey: 'nav.dashboard', route: '/dashboard' },
    { icon: 'campaigns', tkey: 'nav.campaigns', route: '/campaigns' },
    { icon: 'media', tkey: 'nav.media', route: '/media-kit' },
    { icon: 'analytics', tkey: 'nav.analytics', route: '/analytics' },
    { icon: 'wallet', tkey: 'nav.wallet', route: '/wallet' },
    { icon: 'collab', tkey: 'nav.collab', route: '/collab-tools' },
    { icon: 'tasks', tkey: 'nav.tasks', route: '/tasks' },
    { icon: 'community', tkey: 'nav.community', route: '/community' },
    { icon: 'settings', tkey: 'nav.settings', route: '/settings', hasChildren: true },
    { icon: 'support', tkey: 'nav.support', route: '/support', hasChildren: true },
  ];

  onLogout(e: Event) { e.preventDefault(); /* TODO: hook auth */ }

}
